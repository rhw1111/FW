(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bff0a4f"],{"08d6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TreeEntity"},[a("div",{staticClass:"q-pa-md"},[a("q-tree",{ref:"Tree",attrs:{nodes:t.simple,"node-key":"label","selected-color":"primary",selected:t.selected,expanded:t.expanded},on:{"update:selected":function(e){t.selected=e},"update:expanded":function(e){t.expanded=e}}})],1)])},i=[],s={name:"TreeEntity",data:function(){return{simple:[{label:"目录",children:[{ID:"1",label:"文件夹1",Type:0,Value:"",ParentID:null,children:[{ID:"001",label:"子文件夹1",Type:0,Value:"",ParentID:1},{ID:"001",label:"子文件夹2",Type:0,Value:"",ParentID:1}]},{ID:"2",label:"文件夹2",Type:0,Value:"",ParentID:null,children:[{ID:"001",label:"子文件夹3",Type:0,Value:"",ParentID:1}]},{ID:"3",label:"文件夹3",Type:0,Value:"",ParentID:null}]}],selected:["文件夹1"],expanded:["目录"]}},mounted:function(){},methods:{}},o=s,c=a("2877"),l=Object(c["a"])(o,n,i,!1,null,"3501c041",null);e["a"]=l.exports},"1cd1":function(t,e,a){"use strict";var n=a("ff4b"),i=a.n(n);i.a},"244f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TestDataSource"},[a("div",{staticClass:"q-pa-md"},[a("transition",{attrs:{name:"TreeEntity-slid"}},[a("TreeEntity",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticStyle:{"max-width":"20%",height:"600px",overflow:"auto",float:"left"}})],1),a("div",[a("q-btn",{staticStyle:{width:"2%",height:"600px",float:"left"},attrs:{color:"grey",flat:"",dense:"",icon:t.expanded?"keyboard_arrow_left":"keyboard_arrow_right"},on:{click:function(e){t.expanded=!t.expanded}}}),a("q-table",{attrs:{title:"测试数据源列表",data:t.TestDataSourceList,columns:t.columns,selection:"multiple",selected:t.selected,"row-key":"id","rows-per-page-options":[0],"table-style":"max-height: 500px","no-data-label":"暂无数据更新"},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"新 增"},on:{click:t.openCreate}}),a("q-btn",{staticClass:"btn",staticStyle:{background:"#FF0000",color:"white"},attrs:{label:"删 除"},on:{click:t.deleteTestDataSource}})]},proxy:!0},{key:"body-cell-id",fn:function(e){return[a("q-td",{staticClass:"text-left",attrs:{props:e}},[a("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"更 新"},on:{click:function(a){return t.toDetail(e)}}}),a("q-btn",{staticClass:"btn",attrs:{color:"red",label:"删 除"},on:{click:function(a){return t.deleteTestDataSourceOne(e.row.id)}}})],1)]}},{key:"bottom",fn:function(){return[a("q-pagination",{staticClass:"col offset-md-10",attrs:{max:t.pagination.rowsNumber,input:!0},on:{input:t.switchPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})]},proxy:!0}])})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.createFixed,callback:function(e){t.createFixed=e},expression:"createFixed"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("创建测试数据源")])]),a("q-separator"),a("div",{staticClass:"new_input"},[a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("名称:")])]},proxy:!0}]),model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}}),a("q-select",{staticClass:"col",attrs:{options:["String","Int","Json","Label"],dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("类型:")])]},proxy:!0},{key:"prepend",fn:function(){},proxy:!0}]),model:{value:t.Type,callback:function(e){t.Type=e},expression:"Type"}})],1),a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col-xs-12",attrs:{dense:!1,type:"textarea","input-style":{height:"400px"},outlined:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("数据:")])]},proxy:!0}]),model:{value:t.Data,callback:function(e){t.Data=e},expression:"Data"}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:t.newCancel}}),a("q-btn",{attrs:{flat:"",label:"创建",color:"primary"},on:{click:t.newCreate}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.LookDataSourceFixed,callback:function(e){t.LookDataSourceFixed=e},expression:"LookDataSourceFixed"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("更新测试数据源")])]),a("q-separator"),a("div",{staticClass:"new_input"},[a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("名称:")])]},proxy:!0}]),model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}}),a("q-select",{staticClass:"col",attrs:{options:["String","Int","Json","Label"],dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("类型:")])]},proxy:!0},{key:"prepend",fn:function(){},proxy:!0}]),model:{value:t.Type,callback:function(e){t.Type=e},expression:"Type"}})],1),a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col-xs-12",attrs:{dense:!1,type:"textarea","input-style":{height:"400px"},outlined:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("数据:")])]},proxy:!0}]),model:{value:t.Data,callback:function(e){t.Data=e},expression:"Data"}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:t.cancelPutDataSource}}),a("q-btn",{attrs:{flat:"",label:"更新",color:"primary"},on:{click:t.putTestDataSource}})],1)],1)],1)],1)},i=[],s=(a("b0c0"),a("a9e3"),a("498a"),a("53ca")),o=a("365c"),c=a("08d6"),l={name:"TestDataSource",components:{TreeEntity:c["a"]},data:function(){return{createFixed:!1,LookDataSourceFixed:!1,TestDataSourceList:[],SelectedId:"",Name:"",Type:"",Data:"",selected:[],columns:[{name:"name",required:!0,label:"名称",align:"left",field:function(t){return t.name},format:function(t){return"".concat(t)}},{name:"type",align:"left",label:"类型",field:"type"},{name:"data",label:"数据",align:"left",field:"data",style:"max-width: 250px",headerStyle:"max-width: 250px"},{name:"id",label:"操作",align:"right",field:"id",headerStyle:"text-align:center",style:"width: 10%"}],pagination:{page:1,rowsNumber:1},expanded:!0}},mounted:function(){this.getTestDataSource()},methods:{getTestDataSource:function(t){var e=this;this.$q.loading.show();var a={matchName:"",page:t||1,pageSize:50};o["A"](a).then((function(a){console.log(a),e.pagination.page=t||1,e.pagination.rowsNumber=Math.ceil(a.data.totalCount/50),e.TestDataSourceList=a.data.results,e.selected=[],e.$q.loading.hide()}))},openCreate:function(){this.Name="",this.Type="",this.Data="",this.createFixed=!0},toDetail:function(t){var e=t.row;this.LookDataSourceFixed=!0,this.SelectedId=e.id,this.Name=e.name,this.Type=e.type,this.Data=e.data},cancelPutDataSource:function(){this.LookDataSourceFixed=!1,this.SelectedId="",this.Name="",this.Type="",this.Data=""},putTestDataSource:function(){var t=this,e={ID:this.SelectedId,Name:this.Name,Type:this.Type,Data:this.Data.trim()};if(this.SelectedId&&this.Name&&this.Type&&this.Data.trim()){if(!this.isDataType(this.Type))return;this.$q.loading.show(),o["Q"](e).then((function(e){console.log(e),t.getTestDataSource(),t.$q.notify({position:"top",message:"提示",caption:"更新成功",color:"secondary"})}))}else this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"})},switchPage:function(t){this.getTestDataSource(t)},newCreate:function(){var t=this,e={Name:this.Name,Type:this.Type,Data:this.Data};if(this.Name&&this.Type&&this.Data.trim()){if(!this.isDataType(this.Type))return;this.$q.loading.show(),o["H"](e).then((function(){t.getTestDataSource(),t.createFixed=!1,t.$q.notify({position:"top",message:"提示",caption:"创建成功",color:"secondary"})}))}else this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"})},newCancel:function(){this.createFixed=!1},deleteTestDataSource:function(){var t=this;0!=this.selected.length?this.$q.dialog({title:"提示",message:"您确定要删除当前选择的测试数据源吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){if(1==t.selected.length){t.$q.loading.show();var e="?id=".concat(t.selected[0].id);o["g"](e).then((function(){t.selected=[],t.$q.notify({position:"top",message:"提示",caption:"删除成功",color:"secondary"}),t.getTestDataSource()}))}else if(t.selected.length>1){t.$q.loading.show();for(var a=[],n=0;n<t.selected.length;n++)a.push(t.selected[n].id);var i={delArr:a};o["h"](i).then((function(){t.selected=[],t.$q.notify({position:"top",message:"提示",caption:"删除成功",color:"secondary"}),t.getTestDataSource()}))}})):this.$q.notify({position:"top",message:"提示",caption:"请选择您要删除的测试数据源",color:"red"})},deleteTestDataSourceOne:function(t){var e=this;this.$q.dialog({title:"提示",message:"您确定要删除当前选择的测试数据源吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){e.$q.loading.show();var a="?id=".concat(t);o["g"](a).then((function(){e.selected=[],e.$q.notify({position:"top",message:"提示",caption:"删除成功",color:"secondary"}),e.getTestDataSource()}))}))},isDataType:function(t){return"Int"==t?!!Number(this.Data)||(this.$q.notify({position:"top",message:"提示",caption:"当前数据不是Int类型",color:"red"}),!1):"Json"!=t||!!this.isJSON(this.Data.trim())},isJSON:function(t){if("string"==typeof t)try{var e=JSON.parse(t);if("object"==Object(s["a"])(e)&&e)return!0;this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}catch(a){this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}}}},r=l,d=(a("fd1d"),a("1cd1"),a("2877")),p=Object(d["a"])(r,n,i,!1,null,"4263645c",null);e["default"]=p.exports},"387b":function(t,e,a){},fd1d:function(t,e,a){"use strict";var n=a("387b"),i=a.n(n);i.a},ff4b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7bff0a4f.57c9f4bf.js.map