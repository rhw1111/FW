(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c01696a"],{"08d6":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TreeEntity"},[a("div",{staticClass:"q-pa-md"},[a("el-tree",{attrs:{data:t.simple,props:t.defaultProps,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-expand":t.unfoldTree,"node-click":t.handleNodeClick}})],1)])},n=[],s=(a("4de4"),a("a434"),a("b0c0"),a("365c")),o={name:"TreeEntity",props:["existingDirectories","DirectoryLocation"],data:function(){return{simple:[{id:null,label:"根目录",children:[]}],defaultProps:{children:"children",label:"label"},DisablesSelectedDirectories:[],SelectLocation:""}},mounted:function(){console.log(this.DirectoryLocation),this.DisablesSelectedDirectories=this.existingDirectories||[],console.log(this.DisablesSelectedDirectories),this.getTreeEntityList()},methods:{getTreeEntityList:function(t,e){var a=this;this.$q.loading.show();var i={parentId:e||null,matchName:"",page:t||1,type:1,pageSize:100};s["D"](i).then((function(t){console.log(t);for(var e=t.data.results,i=0;i<t.data.results.length;i++)for(var n=0;n<a.DisablesSelectedDirectories.length;n++)a.DisablesSelectedDirectories[n].parentID!=t.data.results[i].id&&a.DisablesSelectedDirectories[n].id!=t.data.results[i].id||e.splice(i,1,"");e=e.filter((function(t){return t}));for(var s=0;s<e.length;s++)a.simple[0].children.push({id:e[s].id,label:e[s].name,parentID:e[s].parentID,type:e[s].type,value:e[s].value,children:[{}]});a.$q.loading.hide()}))},unfoldTree:function(t){var e=this;console.log(t),console.log(this.DisablesSelectedDirectories),this.$q.loading.show();var a={parentId:t.id,matchName:"",page:1,type:1,pageSize:100};s["D"](a).then((function(a){console.log(a);for(var i=a.data.results,n=0;n<a.data.results.length;n++){console.log(a.data.results);for(var s=0;s<e.DisablesSelectedDirectories.length;s++)if(e.DisablesSelectedDirectories[s].parentID==a.data.results[n].id||e.DisablesSelectedDirectories[s].id==a.data.results[n].id){i[n]="";break}}i=i.filter((function(t){return t})),t.children=[];for(var o=0;o<i.length;o++)t.children||e.$set(t,"children",[{}]),t.children.push({id:i[o].id,label:i[o].name,parentID:i[o].parentID,type:i[o].type,value:i[o].value,children:[{}]});e.$q.loading.hide()}))},handleNodeClick:function(t){console.log(t),this.$emit("getDirectoryLocation",t),this.SelectLocation=t},getDirectoryLocation:function(){return this.SelectLocation},getDirectoryStructure:function(){return this.simple}}},r=o,l=a("2877"),c=Object(l["a"])(r,i,n,!1,null,"0ec03a33",null);e["a"]=c.exports},"1a8e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("div",{staticClass:"detail_header"},["DirectoryTestDataSourceDetail"==t.$route.name?a("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"返 回 目 录"},on:{click:t.returnDirectory}}):t._e(),a("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"保 存"},on:{click:t.putTestDataSource}}),a("q-btn",{staticClass:"btn",staticStyle:{background:"#FF0000",color:"white"},attrs:{label:"删 除"},on:{click:t.deleteTestDataSource}})],1),a("div",{staticClass:"q-pa-md row"},[a("div",{staticClass:"new_input"},[a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("名称:")])]},proxy:!0}]),model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}}),a("q-select",{staticClass:"col",attrs:{options:["String","Int","Json","Label"],dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("类型:")])]},proxy:!0},{key:"prepend",fn:function(){},proxy:!0}]),model:{value:t.Type,callback:function(e){t.Type=e},expression:"Type"}}),a("q-input",{staticClass:"col",attrs:{dense:!1,readonly:"",placeholder:"点击右侧加号选择文件目录"},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("文件目录:")])]},proxy:!0},{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(e){t.ChangeFileDirectoryFlag=!0}}})]},proxy:!0}])})],1),a("div",{staticClass:"row input_row"},[a("q-input",{staticClass:"col-xs-12",attrs:{dense:!1,type:"textarea",autogrow:"",outlined:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticStyle:{"font-size":"14px"}},[t._v("数据:")])]},proxy:!0}]),model:{value:t.Data,callback:function(e){t.Data=e},expression:"Data"}})],1)])]),a("q-dialog",{attrs:{persistent:""},model:{value:t.ChangeFileDirectoryFlag,callback:function(e){t.ChangeFileDirectoryFlag=e},expression:"ChangeFileDirectoryFlag"}},[a("q-card",{staticStyle:{width:"100%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("选择文件目录")])]),a("q-separator"),a("TreeEntity"),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:function(e){t.ChangeFileDirectoryFlag=!1}}}),a("q-btn",{attrs:{flat:"",label:"确定",color:"primary"},on:{click:function(e){t.ChangeFileDirectoryFlag=!1}}})],1)],1)],1)],1)},n=[],s=(a("b0c0"),a("a9e3"),a("498a"),a("53ca")),o=a("365c"),r=a("08d6"),l={name:"TestCaseDetail",components:{TreeEntity:r["a"]},data:function(){return{ChangeFileDirectoryFlag:!1,TestDataSourceDetail:"",Id:"",Name:"",Type:"",Data:""}},mounted:function(){this.Id=this.$route.query.id,this.getTestDataSourceDetail()},methods:{getTestDataSourceDetail:function(){var t=this;this.$q.loading.show();var e={id:this.Id};o["A"](e).then((function(e){console.log(e),t.TestDataSourceDetail=e.data,t.Name=e.data.name,t.Type=e.data.type,t.Data=e.data.data,t.$q.loading.hide()}))},putTestDataSource:function(){var t=this,e={ID:this.Id,Name:this.Name,Type:this.Type,Data:this.Data.trim()};if(this.Id&&this.Name&&this.Type&&this.Data.trim()){if(!this.isDataType(this.Type))return;this.$q.loading.show(),o["W"](e).then((function(e){console.log(e),t.getTestDataSourceDetail(),t.$q.notify({position:"top",message:"提示",caption:"保存成功",color:"secondary"})}))}else this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"})},deleteTestDataSource:function(){var t=this;this.$q.dialog({title:"提示",message:"您确定要删除当前的测试数据源吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){t.$q.loading.show();var e="?id=".concat(t.Id);o["g"](e).then((function(){t.$router.push({name:"TestDataSource"})}))}))},isDataType:function(t){return"Int"==t?!!Number(this.Data.trim())||(this.$q.notify({position:"top",message:"提示",caption:"当前数据不是Int类型",color:"red"}),!1):"Json"!=t||!!this.isJSON(this.Data.trim())},isJSON:function(t){if("string"==typeof t)try{var e=JSON.parse(t);if("object"==Object(s["a"])(e)&&null!=e)return!0;this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}catch(a){this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}},returnDirectory:function(){this.$router.push({path:"/Directory"})}}},c=l,d=(a("b231"),a("653f"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"03c36ff0",null);e["default"]=u.exports},"2e78":function(t,e,a){},"653f":function(t,e,a){"use strict";var i=a("2e78"),n=a.n(i);n.a},b231:function(t,e,a){"use strict";var i=a("ed93"),n=a.n(i);n.a},ed93:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1c01696a.1d07f3d9.js.map