(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88e9f5a0"],{1083:function(e,t,i){"use strict";var r=i("c067"),o=i.n(r);o.a},"2fd3":function(e,t,i){"use strict";var r=i("b013"),o=i.n(r);o.a},"43bd":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column item-start",attrs:{id:"Directory"}},[i("div",{staticClass:"col-auto  detail_header row"},[i("div",{staticClass:"col-7 col-md-7 row"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:0!=e.RecordDirectorySite.length,expression:"RecordDirectorySite.length!=0"}],staticClass:"btn",attrs:{color:"primary",label:"上一级"},on:{click:e.toPrevLevel}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:0!=e.RecordDirectorySite.length,expression:"RecordDirectorySite.length!=0"}],staticClass:"btn",attrs:{color:"primary",label:"返回根目录"},on:{click:e.returnToRoot}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isSearchStatus&&0!=e.RecordDirectorySite.length||!e.isSearchStatus,expression:"(isSearchStatus && RecordDirectorySite.length!=0) || !isSearchStatus"}],staticClass:"btn",attrs:{color:"primary",label:"新建目录"},on:{click:e.newFolderCreate}}),i("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"移动目录"},on:{click:e.ChangeFileDirectory}}),i("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"目录重命名"},on:{click:e.ModifyFolderName}}),i("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"复制"},on:{click:e.openCopyDirector}}),i("q-btn",{staticClass:"btn",attrs:{color:"red",label:"删除"},on:{click:e.DeleteFolder}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isSearchStatus&&0!=e.RecordDirectorySite.length||!e.isSearchStatus,expression:"(isSearchStatus && RecordDirectorySite.length!=0) || !isSearchStatus"}],staticClass:"btn",attrs:{color:"primary",label:"新建测试用例"},on:{click:function(t){e.createTestCaseFixed=!0}}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isSearchStatus&&0!=e.RecordDirectorySite.length||!e.isSearchStatus,expression:"(isSearchStatus && RecordDirectorySite.length!=0) || !isSearchStatus"}],staticClass:"btn",attrs:{color:"primary",label:"新建测试数据源"},on:{click:function(t){e.createDataSourceFixed=!0}}})],1),i("div",{staticClass:"col-5 col-md-5  row"},[i("div",{staticClass:"col-8 row"},[i("q-input",{staticClass:"col-6",staticStyle:{height:"40px"},attrs:{outlined:"",placeholder:"请输入文件名称",type:"search",dense:!0},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),i("q-select",{staticClass:"col-5",staticStyle:{"margin-left":"10px",height:"40px"},attrs:{options:["目录","测试用例","测试数据源"],label:"类型",outlined:"",dense:!0},model:{value:e.FileType,callback:function(t){e.FileType=t},expression:"FileType"}})],1),i("div",{staticClass:"col-4 row"},[i("q-btn",{staticClass:"btn col-4",attrs:{color:"primary",label:"搜索"},on:{click:function(t){return e.searchFile(1,!0)}}}),i("q-btn",{staticClass:"btn col-6",attrs:{color:"primary",label:"取消搜索"},on:{click:e.cancelSearch}})],1)])]),i("div",{staticClass:"col-auto  pathLocation q-pa-md"},[e._v(" "+e._s(e.currentDirectoryLocation)+" ")]),i("div",{staticClass:"col-9 col-md-8  folder"},[i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"Rootfolder"},e._l(e.FolderList,(function(t,r){return i("div",{key:r,staticClass:"Rootfolder_list",attrs:{tag:"label"},on:{dblclick:function(i){return e.toNextLevel(t,!0,1)}}},[i("q-checkbox",{staticClass:"checkbox",attrs:{val:t,dense:!0,label:""},model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}}),1==t.type?i("span",{staticClass:"svg-container"},[i("svg",{staticClass:"icon iconfolder",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-wenjianjia2"}})])]):e._e(),2==t.type?i("span",{staticClass:"svg-container"},[i("svg",{staticClass:"icon iconfolder",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon--wenjian"}})])]):e._e(),3==t.type?i("span",{staticClass:"svg-container"},[i("svg",{staticClass:"icon iconfolder",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-shujuyuan"}})])]):e._e(),i("p",[e._v(e._s(t.name))])],1)})),0)])]),i("div",{staticClass:"folderList_page"},[i("el-pagination",{staticStyle:{float:"right","margin-top":"10px","margin-right":"5%"},attrs:{background:"",layout:"prev, pager, next","current-page":e.folderPage.folderPageCurrent,"page-size":100,total:e.folderPage.folderPageTotal},on:{"current-change":e.switchFolderPage}})],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.ChangeFileDirectoryFlag,callback:function(t){e.ChangeFileDirectoryFlag=t},expression:"ChangeFileDirectoryFlag"}},[i("q-card",{staticStyle:{width:"100%"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("选择文件目录")])]),i("q-separator"),i("TreeEntity",{ref:"TreeEntity",attrs:{existingDirectories:e.existingDirectories}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:function(t){e.ChangeFileDirectoryFlag=!1}}}),i("q-btn",{attrs:{flat:"",label:"确定",color:"primary"},on:{click:e.SelectDirectoryLocation}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.createTestCaseFixed,callback:function(t){e.createTestCaseFixed=t},expression:"createTestCaseFixed"}},[i("q-card",{staticStyle:{width:"100%","max-width":"70vw"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("创建测试用例")])]),i("q-separator"),i("CreateShowTestCase",{ref:"CSTestCase",attrs:{currentDirectory:e.RecordDirectorySite[e.RecordDirectorySite.length-1]}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:e.newCancel}}),i("q-btn",{attrs:{flat:"",label:"创建",color:"primary"},on:{click:e.newCreate}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.createDataSourceFixed,callback:function(t){e.createDataSourceFixed=t},expression:"createDataSourceFixed"}},[i("q-card",{staticStyle:{width:"100%","max-width":"70vw"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("创建测试数据源")])]),i("q-separator"),i("CreatePut",{ref:"createDataSource",attrs:{currentDirectory:e.RecordDirectorySite[e.RecordDirectorySite.length-1]}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:e.newDataSourceCancel}}),i("q-btn",{attrs:{flat:"",label:"创建",color:"primary"},on:{click:e.newDataSourceCreate}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.LookDataSourceFixed,callback:function(t){e.LookDataSourceFixed=t},expression:"LookDataSourceFixed"}},[i("q-card",{staticStyle:{width:"100%","max-width":"70vw"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("更新测试数据源")])]),i("q-separator"),i("CreatePut",{ref:"putDataSource",attrs:{detailData:e.dataSourceDetail}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:e.cancelPutDataSource}}),i("q-btn",{attrs:{flat:"",label:"更新",color:"primary"},on:{click:e.putTestDataSource}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.copyDirectorFlag,callback:function(t){e.copyDirectorFlag=t},expression:"copyDirectorFlag"}},[i("q-card",{staticStyle:{width:"100%","max-width":"70vw"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("复制目录/文件")])]),i("q-separator"),i("CopyDirector",{ref:"copyDirector",attrs:{selection:e.selection,existingDirectories:e.existingDirectories}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:function(t){e.copyDirectorFlag=!1}}}),i("q-btn",{attrs:{flat:"",label:"复制",color:"primary"},on:{click:e.copyDirectorCreate}})],1)],1)],1)],1)},o=[],a=(i("99af"),i("a15b"),i("b0c0"),i("498a"),i("365c")),s=i("10b4"),c=i("08d6"),n=i("bed4"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"new_input"},[i("q-dialog",{attrs:{persistent:""},model:{value:e.ChangeFileDirectoryFlag,callback:function(t){e.ChangeFileDirectoryFlag=t},expression:"ChangeFileDirectoryFlag"}},[i("q-card",{staticStyle:{width:"100%"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("选择文件目录")])]),i("q-separator"),i("TreeEntity",{ref:"TreeEntity",attrs:{existingDirectories:e.existingDirectories}}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:function(t){e.ChangeFileDirectoryFlag=!1}}}),i("q-btn",{attrs:{flat:"",label:"确定",color:"primary"},on:{click:e.SelectDirectoryLocation}})],1)],1)],1),i("div",{staticClass:"row input_row"},[i("q-input",{staticClass:"col",attrs:{dense:!1,readonly:"",placeholder:"点击右侧加号选择文件要复制到哪个目录"},scopedSlots:e._u([{key:"before",fn:function(){return[i("span",{staticStyle:{"font-size":"14px"}},[e._v("文件目录位置:")])]},proxy:!0},{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:e.ChangeFileDirectory}})]},proxy:!0}]),model:{value:e.ChangeFileDirectoryName,callback:function(t){e.ChangeFileDirectoryName=t},expression:"ChangeFileDirectoryName"}})],1)],1)},h=[],d=(i("4de4"),i("a434"),{props:["selection","existingDirectories"],components:{TreeEntity:c["a"]},data:function(){return{directorName:"",ChangeFileDirectoryFlag:!1,ChangeFileDirectoryName:"",ChangeFileDirectoryId:null,ChangeFileDirectoryValue:"",selectionArr:[],dataStructure:[],FileList:[]}},mounted:function(){this.selectionArr=this.selection},methods:{ChangeFileDirectory:function(){this.ChangeFileDirectoryFlag=!0},SelectDirectoryLocation:function(){this.$refs.TreeEntity.getDirectoryLocation()?(this.$refs.TreeEntity.getDirectoryLocation().id?this.getTreeEntityTreePath(this.$refs.TreeEntity.getDirectoryLocation().id):this.ChangeFileDirectoryName=this.$refs.TreeEntity.getDirectoryLocation().label,this.ChangeFileDirectoryId=this.$refs.TreeEntity.getDirectoryLocation().id,this.ChangeFileDirectoryValue=this.$refs.TreeEntity.getDirectoryLocation(),this.ChangeFileDirectoryFlag=!1):this.$q.notify({position:"top",message:"提示",caption:"请选择目录位置",color:"red"})},getTreeEntityTreePath:function(e){var t=this;this.$q.loading.show();var i={id:e};a["F"](i).then((function(e){console.log(e),t.ChangeFileDirectoryName="根目录 > "+e.data.join(" > "),t.$q.loading.hide()}))},copyDirectorCreate:function(){this.ChangeFileDirectoryName?(console.log(this.selectionArr),this.recheckingSelection(this.ChangeFileDirectoryValue)):this.$q.notify({position:"top",message:"提示",caption:"请选择目录位置",color:"red"})},recheckingSelection:function(e){this.$q.loading.show();for(var t=0;t<this.selectionArr.length;t++)1==this.selectionArr[t].type?this.dataStructure.push({originalNode:this.selectionArr[t],newNode:e}):this.FileList.push(this.selectionArr[t]);console.log(this.dataStructure,this.FileList),this.CreateDataStructureAndFiles(this.dataStructure[0],this.ChangeFileDirectoryValue)},CreateDataStructureAndFiles:function(e,t){console.log("------------开始执行复制操作---------------");var i=this,r=0;function o(){if(r!=i.FileList.length){console.log(i.FileList,r);var c={ID:i.FileList[r].value,ParentID:t.id,Type:2==i.FileList[r].type?"TestCase":"TestDataSource"};a["R"](c).then((function(e){console.log(e),e.data||i.$q.notify({position:"top",message:"提示",caption:"已存在".concat(i.FileList[r].name),color:"red"}),r++,o()}))}else i.FileList=[],e?s():(i.$q.notify({position:"top",message:"提示",caption:"复制完成",color:"secondary"}),console.log("------------复制操作结束---------------"),i.$q.loading.hide())}function s(){var t={Name:e.originalNode.name,FolderID:e.newNode.id};a["S"](t).then((function(t){console.log(t),c(e.originalNode,t.data)}))}function c(e,t){var r={parentId:e.id,matchName:"",page:1,type:null,pageSize:99999};a["D"](r).then((function(e){if(console.log(e),0!=e.data.results.length)for(var r=e.data.results,o=0;o<r.length;o++)1==r[o].type?i.dataStructure.push({originalNode:r[o],newNode:t}):i.FileList.push(r[o]);i.dataStructure.splice(0,1,""),i.dataStructure=i.dataStructure.filter((function(e){return e})),console.log(i.dataStructure,i.FileList),0!=i.dataStructure.length||0!=i.FileList.length?i.CreateDataStructureAndFiles(i.dataStructure[0],t):(i.$q.notify({position:"top",message:"提示",caption:"复制完成",color:"secondary"}),console.log("------------复制操作结束---------------"),i.$q.loading.hide())}))}0!=this.FileList.length?o():s()}}}),g=d,u=(i("2fd3"),i("2877")),y=Object(u["a"])(g,l,h,!1,null,"1e47a44c",null),p=y.exports,f={name:"Directory",components:{CreateShowTestCase:s["a"],TreeEntity:c["a"],CreatePut:n["a"],CopyDirector:p},data:function(){return{FolderList:[],selection:[],RecordDirectorySite:[],folderPage:{folderPageCurrent:null,folderPageTotal:null},isSearchStatus:!1,currentDirectoryLocation:"",searchText:"",FileType:null,ChangeFileDirectoryFlag:!1,ChangeFileDirectoryValue:"",createTestCaseFixed:!1,dataSourceDetail:"",createDataSourceFixed:!1,LookDataSourceFixed:!1,copyDirectorFlag:!1,existingDirectories:[]}},created:function(){this.getEchoLocation()},methods:{getEchoLocation:function(e){var t=this;this.selection=[];var i=JSON.parse(sessionStorage.getItem("Page"));function r(){t.RecordDirectorySite=JSON.parse(sessionStorage.getItem("RecordDirectorySite")),console.log(t.folderPage,i),null==t.RecordDirectorySite&&(t.RecordDirectorySite=[]);var r=i?i.folderPageCurrent:e;0!=t.RecordDirectorySite.length?t.toNextLevel(t.RecordDirectorySite[t.RecordDirectorySite.length-1],!1,r):t.getTreeEntityList(r),sessionStorage.removeItem("Page")}this.folderPage.folderPageCurrent=e,this.isSearchStatus=JSON.parse(sessionStorage.getItem("isSearchStatus"))||!1,this.isSearchStatus?(console.log(this.isSearchStatus),this.RecordDirectorySite=JSON.parse(sessionStorage.getItem("RecordSearchDirectorySite")),i?(this.searchText=i.searchText,this.FileType=i.FileType,0==this.RecordDirectorySite.length?this.searchFile(i.folderPageCurrent,!1):this.toNextLevel(this.RecordDirectorySite[this.RecordDirectorySite.length-1],!1,i.folderPageCurrent),2==i.type&&sessionStorage.removeItem("Page")):0==this.RecordDirectorySite.length?this.searchFile(e,!1):this.toNextLevel(this.RecordDirectorySite[this.RecordDirectorySite.length-1],!1,e)):r()},getTreeEntityList:function(e){var t=this;this.$q.loading.show();var i={parentId:null,matchName:"",page:e||1,type:null,pageSize:100};a["D"](i).then((function(i){console.log(i),t.folderPage.folderPageCurrent=e||1,t.folderPage.folderPageTotal=i.data.totalCount,t.FolderList=i.data.results,t.getTreeEntityTreePath()}))},toPrevLevel:function(){var e=this;if(this.isSearchStatus){var t=JSON.parse(sessionStorage.getItem("Page"));t&&(this.searchText=t.searchText,this.FileType=t.FileType)}else this.searchText="",this.FileType=null;if(this.isSearchStatus&&1==this.RecordDirectorySite.length)this.searchFile(this.RecordDirectorySite[0].pageCurrent,!0);else{var i={parentId:this.RecordDirectorySite[this.RecordDirectorySite.length-1].id,page:this.RecordDirectorySite[this.RecordDirectorySite.length-1].pageCurrent,pageSize:100};this.$q.loading.show(),a["G"](i).then((function(t){console.log(t),e.RecordDirectorySite.pop(),e.isSearchStatus?sessionStorage.setItem("RecordSearchDirectorySite",JSON.stringify(e.RecordDirectorySite)):sessionStorage.setItem("RecordDirectorySite",JSON.stringify(e.RecordDirectorySite)),e.selection=[],e.folderPage.folderPageCurrent=t.data.currentPage,e.folderPage.folderPageTotal=t.data.totalCount,e.FolderList=t.data.results,e.getTreeEntityTreePath()}))}},toNextLevel:function(e,t,i){var r=this;if(this.isSearchStatus){var o=JSON.parse(sessionStorage.getItem("Page"));o&&(this.searchText=o.searchText,this.FileType=o.FileType)}else this.searchText="",this.FileType=null;if(console.log(e),1===e.type){var s={parentId:e.id,matchName:"",page:i||1,type:null,pageSize:100};this.$q.loading.show(),a["D"](s).then((function(i){console.log(i),t&&(e.pageCurrent=r.folderPage.folderPageCurrent,r.RecordDirectorySite.push(e),r.isSearchStatus?sessionStorage.setItem("RecordSearchDirectorySite",JSON.stringify(r.RecordDirectorySite)):sessionStorage.setItem("RecordDirectorySite",JSON.stringify(r.RecordDirectorySite)),console.log(r.RecordDirectorySite)),r.folderPage.folderPageCurrent=i.data.currentPage,r.folderPage.folderPageTotal=i.data.totalCount,r.selection=[],r.FolderList=i.data.results,r.getTreeEntityTreePath()}))}else 2===e.type?(sessionStorage.setItem("Page",JSON.stringify({searchText:this.isSearchStatus?this.searchText.trim():"",FileType:this.isSearchStatus?this.FileType:null,folderPageCurrent:this.folderPage.folderPageCurrent,folderPageTotal:this.folderPage.folderPageTotal,type:2})),this.$router.push({name:"DirectoryTestCaseDetail",query:{id:e.value}})):3===e.type&&(console.log(e),this.getTestDataSourceDetail(e.value))},DeleteFolder:function(){var e=this;0==this.selection.length?this.$q.notify({position:"top",message:"提示",caption:"请选择文件（目录、测试用例、测试数据源）",color:"red"}):this.$q.dialog({title:"提示",message:"您确定要删除当前选择的文件吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){var t=e,i=0;function r(){t.$q.loading.show();var e="?id=".concat(t.selection[i].id);a["i"](e).then((function(e){console.log(e),i!=t.selection.length-1?(i++,r()):t.getEchoLocation()}))}r()}))},switchFolderPage:function(e){console.log(e),this.getEchoLocation(e)},getTreeEntityTreePath:function(){var e=this;if(console.log(this.RecordDirectorySite),this.$q.loading.show(),this.isSearchStatus)if(this.RecordDirectorySite.length>0){var t={id:this.RecordDirectorySite[this.RecordDirectorySite.length-1].id};a["F"](t).then((function(t){console.log(t),e.currentDirectoryLocation="当前所在目录位置：根目录 > "+t.data.join(" > "),e.$q.loading.hide()}))}else this.currentDirectoryLocation="当前所在目录位置：根目录 > ",this.$q.loading.hide();else if(0!=this.RecordDirectorySite.length){var i={id:this.RecordDirectorySite[this.RecordDirectorySite.length-1].id};a["F"](i).then((function(t){console.log(t),e.currentDirectoryLocation="当前所在目录位置：根目录 > "+t.data.join(" > "),e.$q.loading.hide()}))}else this.currentDirectoryLocation="当前所在目录位置：根目录 > ",this.$q.loading.hide()},searchFile:function(e,t){var i=this;if(console.log(e),console.log(this.searchText),this.searchText.trim()||this.FileType){console.log(this.FileType);var r=null;switch(this.FileType){case"目录":r=1;break;case"测试用例":r=2;break;case"测试数据源":r=3;break}var o={matchName:this.searchText,page:e||1,type:r,pageSize:100};console.log(o),this.$q.loading.show(),a["E"](o).then((function(e){console.log(e),i.folderPage.folderPageCurrent=e.data.currentPage,i.folderPage.folderPageTotal=e.data.totalCount,i.isSearchStatus=!0,sessionStorage.setItem("Page",JSON.stringify({searchText:i.searchText.trim(),FileType:i.FileType,folderPageCurrent:i.folderPage.folderPageCurrent,folderPageTotal:i.folderPage.folderPageTotal,type:1})),t&&(sessionStorage.setItem("RecordSearchDirectorySite",JSON.stringify([])),sessionStorage.setItem("isSearchStatus",!0),i.RecordDirectorySite=JSON.parse(sessionStorage.getItem("RecordSearchDirectorySite"))),console.log(i.RecordDirectorySite),i.FolderList=e.data.results,i.getTreeEntityTreePath()}))}else this.$q.notify({position:"top",message:"提示",caption:"请填写搜索内容或选择类型进行搜索",color:"red"})},cancelSearch:function(){this.isSearchStatus&&(sessionStorage.removeItem("Page"),sessionStorage.setItem("RecordSearchDirectorySite",JSON.stringify([])),sessionStorage.setItem("isSearchStatus",!1),this.isSearchStatus=!1,this.searchText="",this.FileType=null,this.getEchoLocation())},returnToRoot:function(){this.isSearchStatus?(this.RecordDirectorySite=[],sessionStorage.removeItem("Page"),sessionStorage.setItem("RecordSearchDirectorySite",JSON.stringify([])),sessionStorage.setItem("isSearchStatus",!1),this.isSearchStatus=!1,this.searchText="",this.FileType=null,this.getTreeEntityList()):(this.RecordDirectorySite=[],this.getTreeEntityList(),sessionStorage.setItem("RecordDirectorySite",JSON.stringify(this.RecordDirectorySite)))},newFolderCreate:function(){var e=this;this.$q.dialog({title:"新建目录",message:"目录名称（目录名称不能为空）",prompt:{model:"",type:"text"},persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(t){if(t.trim()){e.$q.loading.show();var i={Name:t,FolderID:e.RecordDirectorySite.length?e.RecordDirectorySite[e.RecordDirectorySite.length-1].id:null};a["M"](i).then((function(t){console.log(t),e.getEchoLocation()}))}else e.$q.notify({position:"top",message:"提示",caption:"目录名称不能为空",color:"red"})}))},ModifyFolderName:function(){var e=this;if(console.log(this.selection),0==this.selection.length)this.$q.notify({position:"top",message:"提示",caption:"请选择目录进行修改",color:"red"});else if(this.selection.length>1)this.$q.notify({position:"top",message:"提示",caption:"只能选择一个目录进行修改",color:"red"});else{if(1!=this.selection[0].type)return void this.$q.notify({position:"top",message:"提示",caption:"只能选择目录进行修改",color:"red"});this.$q.dialog({title:"目录重命名",message:"目录名称",prompt:{model:this.selection[0].name,type:"text"},persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(t){if(console.log(t),t.trim()){var i="?id=".concat(e.selection[0].id,"&name=").concat(t);e.$q.loading.show(),a["Y"](i).then((function(t){console.log(t),e.$q.notify({position:"top",message:"提示",caption:"修改成功",color:"secondary"}),e.getEchoLocation()}))}else e.$q.notify({position:"top",message:"提示",caption:"目录名称不能为空",color:"red"})}))}},ChangeFileDirectory:function(){if(0==this.selection.length)this.$q.notify({position:"top",message:"提示",caption:"请选择文件（目录、测试用例、测试数据源）",color:"red"});else{this.existingDirectories=[];for(var e=0;e<this.selection.length;e++)1==this.selection[e].type&&this.existingDirectories.push(this.selection[e]);this.ChangeFileDirectoryFlag=!0}},SelectDirectoryLocation:function(){var e=this,t=0;function i(){var r="";r=e.ChangeFileDirectoryValue.id?"?id=".concat(e.selection[t].id,"&parentId=").concat(e.ChangeFileDirectoryValue.id):"?id=".concat(e.selection[t].id),a["Z"](r).then((function(r){console.log(r),t!=e.selection.length-1?(t++,i()):(e.ChangeFileDirectoryFlag=!1,e.getEchoLocation())}))}this.ChangeFileDirectoryValue=this.$refs.TreeEntity.getDirectoryLocation(),this.ChangeFileDirectoryValue?(this.$q.loading.show(),i(),console.log(this.ChangeFileDirectoryValue)):this.$q.notify({position:"top",message:"提示",caption:"请选择要移动到的目录位置",color:"red"})},newCancel:function(){this.$refs.CSTestCase.newCancel(),this.createTestCaseFixed=!1},newCreate:function(){var e=this;if(this.$refs.CSTestCase.newCreate()){var t=this.$refs.CSTestCase.newCreate();this.$q.loading.show(),a["J"](t).then((function(t){console.log(t),e.$q.notify({position:"top",message:"提示",caption:"创建成功",color:"secondary"}),e.newCancel(),e.getEchoLocation()}))}},newDataSourceCreate:function(){var e=this;if(this.$refs.createDataSource.newCreate()){var t=this.$refs.createDataSource.newCreate();this.$q.loading.show(),a["K"](t).then((function(){e.getEchoLocation(),e.newDataSourceCancel(),e.$q.notify({position:"top",message:"提示",caption:"创建成功",color:"secondary"})}))}},newDataSourceCancel:function(){this.$refs.createDataSource.newCancel(),this.createDataSourceFixed=!1},getTestDataSourceDetail:function(e){var t=this;this.$q.loading.show();var i={id:e};a["A"](i).then((function(e){console.log(e);var i=e.data;t.dataSourceDetail={SelectedId:i.id,Name:i.name,Type:i.type,Data:i.data,ChangeFileDirectoryName:i.parentName,ChangeFileDirectoryId:i.parentID},t.LookDataSourceFixed=!0,t.$q.loading.hide()}))},cancelPutDataSource:function(){this.$refs.putDataSource.cancelPutDataSource(),this.LookDataSourceFixed=!1},putTestDataSource:function(){var e=this;if(this.$refs.putDataSource.putTestDataSource()){var t=this.$refs.putDataSource.putTestDataSource();this.$q.loading.show(),a["W"](t).then((function(t){console.log(t),e.getEchoLocation(),e.cancelPutDataSource(),e.$q.notify({position:"top",message:"提示",caption:"更新成功",color:"secondary"})}))}},openCopyDirector:function(){if(0!=this.selection.length){this.existingDirectories=[];for(var e=0;e<this.selection.length;e++)1==this.selection[e].type&&this.existingDirectories.push(this.selection[e]);this.copyDirectorFlag=!0}else this.$q.notify({position:"top",message:"提示",caption:"请选择要复制的目录文件",color:"red"})},copyDirectorCreate:function(){this.$refs.copyDirector.copyDirectorCreate(),this.copyDirectorFlag=!1,this.selection=[]}}},S=f,D=(i("1083"),Object(u["a"])(S,r,o,!1,null,"a098f6a6",null));t["default"]=D.exports},b013:function(e,t,i){},bed4:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("q-dialog",{attrs:{persistent:""},model:{value:e.ChangeFileDirectoryFlag,callback:function(t){e.ChangeFileDirectoryFlag=t},expression:"ChangeFileDirectoryFlag"}},[i("q-card",{staticStyle:{width:"100%"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("选择文件目录位置")])]),i("q-separator"),i("TreeEntity",{ref:"TreeEntity"}),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:function(t){e.ChangeFileDirectoryFlag=!1}}}),i("q-btn",{attrs:{flat:"",label:"确定",color:"primary"},on:{click:e.SelectDirectoryLocation}})],1)],1)],1),i("div",{staticClass:"new_input"},[i("div",{staticClass:"row input_row"},[i("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:e._u([{key:"before",fn:function(){return[i("span",{staticStyle:{"font-size":"14px"}},[e._v("名称:")])]},proxy:!0}]),model:{value:e.Name,callback:function(t){e.Name=t},expression:"Name"}}),i("q-select",{staticClass:"col",attrs:{options:["String","Int","Json","Label"],dense:!1},scopedSlots:e._u([{key:"before",fn:function(){return[i("span",{staticStyle:{"font-size":"14px"}},[e._v("类型:")])]},proxy:!0},{key:"prepend",fn:function(){},proxy:!0}]),model:{value:e.Type,callback:function(t){e.Type=t},expression:"Type"}})],1),i("div",{staticClass:"row input_row"},[i("q-input",{staticClass:"col",attrs:{dense:!1,readonly:"",placeholder:"点击右侧加号选择文件目录位置"},scopedSlots:e._u([{key:"before",fn:function(){return[i("span",{staticStyle:{"font-size":"14px"}},[e._v("文件目录位置:")])]},proxy:!0},{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:e.ChangeFileDirectory}})]},proxy:!0}]),model:{value:e.ChangeFileDirectoryName,callback:function(t){e.ChangeFileDirectoryName=t},expression:"ChangeFileDirectoryName"}})],1),i("div",{staticClass:"row input_row"},[i("q-input",{staticClass:"col-xs-12",attrs:{dense:!1,type:"textarea","input-style":{height:"380px"},outlined:""},scopedSlots:e._u([{key:"before",fn:function(){return[i("span",{staticStyle:{"font-size":"14px"}},[e._v("数据:")])]},proxy:!0}]),model:{value:e.Data,callback:function(t){e.Data=t},expression:"Data"}})],1)])],1)},o=[],a=(i("a15b"),i("a9e3"),i("498a"),i("53ca")),s=i("365c"),c=i("08d6"),n={props:["detailData","currentDirectory"],components:{TreeEntity:c["a"]},data:function(){return{SelectedId:"",Name:"",Type:"",Data:"",ChangeFileDirectoryFlag:!1,ChangeFileDirectoryName:"",ChangeFileDirectoryId:null}},mounted:function(){if(this.detailData){var e=this.detailData;console.log(e),this.SelectedId=e.SelectedId,this.Name=e.Name,this.Type=e.Type,this.Data=e.Data,e.ChangeFileDirectoryId?this.getTreeEntityTreePath(e.ChangeFileDirectoryId):this.ChangeFileDirectoryName=""!=e.ChangeFileDirectoryName?e.ChangeFileDirectoryName:"根目录 >",this.ChangeFileDirectoryId=e.ChangeFileDirectoryId}this.currentDirectory?(this.getTreeEntityTreePath(this.currentDirectory.id),this.ChangeFileDirectoryId=this.currentDirectory.id):this.ChangeFileDirectoryName="根目录 >"},methods:{newCreate:function(){var e={Name:this.Name.trim(),Type:this.Type,Data:this.Data.trim(),FolderID:this.ChangeFileDirectoryId};if(this.Name.trim()&&this.Type&&this.Data.trim()){if(!this.isDataType(this.Type))return;return e}return this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"}),!1},newCancel:function(){this.Name="",this.Type="",this.Data=""},cancelPutDataSource:function(){this.SelectedId="",this.Name="",this.Type="",this.Data="",this.ChangeFileDirectoryName="",this.ChangeFileDirectoryId=null},putTestDataSource:function(){var e={ID:this.SelectedId,Name:this.Name.trim(),Type:this.Type,Data:this.Data.trim(),FolderID:this.ChangeFileDirectoryId};if(this.SelectedId&&this.Name.trim()&&this.Type&&this.Data.trim()){if(!this.isDataType(this.Type))return;return this.$q.loading.show(),e}return this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"}),!1},isDataType:function(e){return"Int"==e?!!Number(this.Data)||(this.$q.notify({position:"top",message:"提示",caption:"当前数据不是Int类型",color:"red"}),!1):"Json"!=e||!!this.isJSON(this.Data.trim())},isJSON:function(e){if("string"==typeof e)try{var t=JSON.parse(e);if("object"==Object(a["a"])(t)&&t)return!0;this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}catch(i){this.$q.notify({position:"top",message:"提示",caption:"配置不是正确的JSON格式",color:"red"})}},ChangeFileDirectory:function(){this.ChangeFileDirectoryFlag=!0},SelectDirectoryLocation:function(){this.$refs.TreeEntity.getDirectoryLocation().id?this.getTreeEntityTreePath(this.$refs.TreeEntity.getDirectoryLocation().id):this.ChangeFileDirectoryName=this.$refs.TreeEntity.getDirectoryLocation().label||"根目录 >",this.ChangeFileDirectoryId=this.$refs.TreeEntity.getDirectoryLocation().id||null,this.ChangeFileDirectoryFlag=!1},getTreeEntityTreePath:function(e){var t=this;console.log(e),this.$q.loading.show();var i={id:e};s["F"](i).then((function(e){console.log(e),t.ChangeFileDirectoryName="根目录 > "+e.data.join(" > "),t.$q.loading.hide()}))}}},l=n,h=i("2877"),d=Object(h["a"])(l,r,o,!1,null,"a3dc0bea",null);t["a"]=d.exports},c067:function(e,t,i){}}]);
//# sourceMappingURL=chunk-88e9f5a0.e2dd5c1e.js.map