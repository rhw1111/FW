(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3a8803a"],{"3d36":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail"},[s("lookUp",{ref:"lookUp",attrs:{masterHostList:t.masterHostList,masterSelectIndex:t.masterSelectIndex,fixed:t.HostFixed},on:{addMasterHost:t.addMasterHost,cancelMasterHost:t.cancelMasterHost}}),s("div",{staticClass:"detail_header"},[s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"保 存",disable:1==t.detailData.status},on:{click:t.putTestCase}}),s("q-btn",{staticClass:"btn",staticStyle:{background:"#FF0000",color:"white"},attrs:{label:"删 除",disable:1==t.detailData.status},on:{click:t.deleteTestCase}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"运 行",disable:1==t.detailData.status},on:{click:t.run}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"停 止",disable:1!=t.detailData.status},on:{click:t.stop}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"查 看 状 态"},on:{click:t.lookStatus}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"查 看 Master 日 志"},on:{click:t.lookMasterLog}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"查 看 Slave 日 志"},on:{click:t.lookSlaveLog}}),s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"查 看 monitorUrl"},on:{click:t.lookMonitorUrl}})],1),1==t.detailData.status?s("div",{staticClass:"mask"}):t._e(),s("div",{staticClass:"q-pa-md row"},[s("div",{staticClass:"new_input"},[s("div",{staticClass:"row"},[s("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("Name:")])]},proxy:!0}]),model:{value:t.Name,callback:function(e){t.Name=e},expression:"Name"}}),s("q-input",{staticClass:"col",staticStyle:{"margin-left":"50px"},attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("EngineType:")])]},proxy:!0}]),model:{value:t.EngineType,callback:function(e){t.EngineType=e},expression:"EngineType"}}),s("q-input",{staticClass:"col",attrs:{dense:!1,readonly:""},on:{dblclick:t.masterHost},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("主机:")])]},proxy:!0}]),model:{value:t.masterHostSelect,callback:function(e){t.masterHostSelect=e},expression:"masterHostSelect"}})],1),s("div",{staticClass:"row"},[s("q-input",{staticClass:"col-xs-12",attrs:{dense:!1,type:"textarea",outlined:""},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("Configuration:")])]},proxy:!0}]),model:{value:t.Configuration,callback:function(e){t.Configuration=e},expression:"Configuration"}})],1)])]),s("q-dialog",{attrs:{persistent:""},model:{value:t.createFixed,callback:function(e){t.createFixed=e},expression:"createFixed"}},[s("q-card",{staticStyle:{width:"100%"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("创建SlaveHost")])]),s("q-separator"),s("div",{staticClass:"new_input"},[s("div",{staticClass:"row"},[s("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("SlaveHostName:")])]},proxy:!0}]),model:{value:t.SlaveHostName,callback:function(e){t.SlaveHostName=e},expression:"SlaveHostName"}}),s("q-input",{staticClass:"col",attrs:{dense:!1},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("Count:")])]},proxy:!0}]),model:{value:t.SlaveCount,callback:function(e){t.SlaveCount=e},expression:"SlaveCount"}})],1),s("div",{staticClass:"row"},[s("q-input",{staticClass:"col",attrs:{dense:!1,type:"textarea",outlined:""},scopedSlots:t._u([{key:"before",fn:function(){return[s("span",{staticStyle:{"font-size":"14px"}},[t._v("ExtensionInfo:")])]},proxy:!0}]),model:{value:t.SlaveExtensionInfo,callback:function(e){t.SlaveExtensionInfo=e},expression:"SlaveExtensionInfo"}})],1)]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:t.newCancel}}),s("q-btn",{attrs:{flat:"",label:"创建",color:"primary"},on:{click:t.newCreate}})],1)],1)],1),s("div",{staticClass:"q-pa-md row HostList"},[s("q-list",{staticClass:"col-xs-12 col-sm-6 col-xl-6",attrs:{bordered:""}},[s("q-table",{attrs:{title:"SalveHost列表",data:t.SlaveHostList,columns:t.columns,"row-key":"id",selection:"multiple",selected:t.SlaveHostSelected,"rows-per-page-options":[0]},on:{"update:selected":function(e){t.SlaveHostSelected=e},"row-dblclick":t.toSlaveHostDetail},scopedSlots:t._u([{key:"top-right",fn:function(){return[s("q-btn",{staticClass:"btn",attrs:{color:"primary",label:"新 增"},on:{click:t.openSlaveHost}}),s("q-btn",{staticClass:"btn",staticStyle:{background:"#FF0000",color:"white"},attrs:{label:"删 除"},on:{click:t.deleteSlaveHost}})]},proxy:!0},{key:"bottom",fn:function(){},proxy:!0}])})],1),s("q-list",{staticClass:"col-xs-12 col-sm-6 col-xl-6",attrs:{bordered:""}},[s("q-table",{attrs:{title:"History列表",data:t.HistoryList,columns:t.HistoryColumns,"row-key":"id",selection:"multiple",selected:t.HistorySelected,"rows-per-page-options":[0]},on:{"update:selected":function(e){t.HistorySelected=e},"row-dblclick":t.toHistoryDetail},scopedSlots:t._u([{key:"top-right",fn:function(){return[s("q-btn",{staticClass:"btn",staticStyle:{background:"#FF0000",color:"white"},attrs:{label:"删 除"},on:{click:t.deleteHistory}})]},proxy:!0},{key:"bottom",fn:function(){return[s("q-pagination",{staticClass:"col offset-md-8",attrs:{max:t.pagination.rowsNumber,input:!0},on:{input:t.switchPage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})]},proxy:!0}])})],1)],1)],1)},o=[],i=(s("99af"),s("b0c0"),s("a9e3"),s("365c")),n=s("7729"),l={name:"TestCaseDetail",components:{lookUp:n["a"]},data:function(){return{createFixed:!1,detailData:"",data:[{name:"2020/6/20Test",EngineType:"1"},{name:"2020/6/21Test",EngineType:"2"},{name:"2020/6/22Test",EngineType:"3"}],datavalue:[],HostFixed:!1,masterHostList:[],masterHostSelect:"",masterSelectIndex:"",Name:"",Configuration:"",EngineType:"",MasterHostID:"",SlaveHostName:"",SlaveCount:"",SlaveExtensionInfo:"",SlaveHostList:[],SlaveHostSelected:[],columns:[{name:"slaveName",required:!0,label:"SlaveName",align:"left",field:function(t){return t.slaveName},format:function(t){return"".concat(t)}},{name:"count",align:"left",label:"Count",field:"count"},{name:"extensionInfo",label:"ExtensionInfo",align:"left",field:"extensionInfo"}],HistoryList:[],HistorySelected:[],HistoryColumns:[{name:"createTime",required:!0,label:"CreateTime",align:"left",field:function(t){return t.createTime},format:function(t){return"".concat(t)}}],pagination:{page:1,rowsNumber:1}}},mounted:function(){this.getTestCaseDetail()},methods:{getTestCaseDetail:function(){var t=this;this.$q.loading.show(),i["o"]({id:this.$route.query.id}).then((function(e){console.log(e),t.masterHostSelect=e.data.masterHostAddress,t.MasterHostID=e.data.masterHostID,t.detailData=e.data,t.Name=e.data.name,t.Configuration=e.data.configuration,t.EngineType=e.data.engineType,t.getMasterHostList(),t.getSlaveHostsList(),t.getHistoryList()}))},getSlaveHostsList:function(){var t=this;i["m"]({caseId:this.$route.query.id}).then((function(e){console.log(e),t.SlaveHostList=e.data,t.$q.loading.hide()}))},getMasterHostList:function(){var t=this;i["k"]().then((function(e){console.log(e),t.masterHostList=e.data;for(var s=0;s<e.data.length;s++)if(e.data[s].id==t.detailData.masterHostID){t.masterSelectIndex=s;break}t.$q.loading.hide()}))},getHistoryList:function(t){var e=this,s={caseId:this.$route.query.id,page:t||1,pageSize:50};i["j"](s).then((function(s){console.log(s),e.pagination.page=t||1,e.pagination.rowsNumber=Math.ceil(s.data.totalCount/50),e.HistoryList=s.data.results,e.$q.loading.hide()}))},masterHost:function(){this.HostFixed=!0},addMasterHost:function(t){if(void 0==t)return!1;this.masterHostSelect=this.masterHostList[t].address,this.MasterHostID=this.masterHostList[t].id,this.masterSelectIndex=t,this.HostFixed=!1},cancelMasterHost:function(){this.HostFixed=!1,this.$refs.lookUp.selectIndex=this.masterSelectIndex},putTestCase:function(){var t=this,e={ID:this.detailData.id,Name:this.Name,Configuration:this.Configuration,EngineType:this.EngineType,MasterHostID:this.MasterHostID};this.detailData.id&&this.Name&&this.Configuration&&this.EngineType&&this.MasterHostID?(this.$q.loading.show(),i["y"](e).then((function(e){console.log(e),t.$q.notify({position:"top",message:"提示",caption:"保存成功",color:"secondary"}),t.$q.loading.hide()}))):this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"})},deleteTestCase:function(){var t=this;this.$q.dialog({title:"提示",message:"您确定要删除当前的TestCase吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){t.$q.loading.show();var e={id:t.detailData.id};i["e"](e).then((function(e){console.log(e),t.$router.push({name:"TestCase"})}))})).onCancel((function(){}))},openSlaveHost:function(){this.createFixed=!0},newCreate:function(){var t=this,e={HostID:this.detailData.masterHostID,TestCaseID:this.detailData.id,SlaveName:this.SlaveHostName,Count:Number(this.SlaveCount),ExtensionInfo:this.SlaveExtensionInfo};this.detailData.id&&this.SlaveHostName&&this.SlaveCount&&this.SlaveExtensionInfo&&this.detailData.masterHostID?(this.$q.loading.show(),i["s"](e).then((function(e){console.log(e),t.$q.notify({position:"top",message:"提示",caption:"创建成功",color:"secondary"}),t.createFixed=!1,t.getSlaveHostsList()}))):this.$q.notify({position:"top",message:"提示",caption:"请填写完整信息",color:"red"})},deleteSlaveHost:function(){var t=this;console.log(this.SlaveHostSelected,this.detailData),this.$q.dialog({title:"提示",message:"您确定要删除当前选择的SalveHost吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){if(t.$q.loading.show(),1==t.SlaveHostSelected.length){var e="?caseId=".concat(t.detailData.id,"&id=").concat(t.SlaveHostSelected[0].id);i["c"](e).then((function(e){console.log(e),t.getSlaveHostsList()}))}else if(t.SlaveHostSelected.length>1){for(var s=[],a=0;a<t.SlaveHostSelected.length;a++)s.push(t.SlaveHostSelected[a].id);console.log(s);var o={CaseID:t.detailData.id,IDS:s};i["d"](o).then((function(e){console.log(e),t.getSlaveHostsList()}))}})).onCancel((function(){}))},toSlaveHostDetail:function(t,e){sessionStorage.setItem("SlaveHostDetailData",JSON.stringify(e)),this.$router.push({name:"SlaveHostDetail"})},newCancel:function(){this.createFixed=!1,this.SlaveHostName="",this.SlaveCount="",this.SlaveExtensionInfo=""},deleteHistory:function(){var t=this;this.$q.dialog({title:"提示",message:"您确定要删除当前选择的History吗",persistent:!0,ok:{push:!0,label:"确定"},cancel:{push:!0,label:"取消"}}).onOk((function(){if(t.$q.loading.show(),1==t.HistorySelected.length){var e="?caseId=".concat(t.detailData.id,"&historyId=").concat(t.HistorySelected[0].id);i["a"](e).then((function(){t.getHistoryList()}))}else if(t.HistorySelected.length>1){for(var s=[],a=0;a<t.HistorySelected.length;a++)s.push(t.HistorySelected[a].id);console.log(s);var o={CaseID:t.detailData.id,IDS:s};i["b"](o).then((function(){t.getHistoryList()}))}}))},switchPage:function(t){this.$q.loading.show(),this.getHistoryList(t)},toHistoryDetail:function(t,e){console.log(t,e),this.$router.push({name:"HistoryDetail",query:{historyId:e.id,caseId:e.caseID}})},run:function(){var t=this;this.$q.loading.show();var e="?caseId=".concat(this.$route.query.id);i["v"](e).then((function(e){console.log(e),t.getTestCaseDetail()}))},stop:function(){var t=this;this.$q.loading.show();var e="?caseId=".concat(this.$route.query.id);i["w"](e).then((function(e){console.log(e),t.getTestCaseDetail()}))},lookStatus:function(){var t=this;this.$q.loading.show(),i["h"]({caseId:this.$route.query.id}).then((function(e){t.$q.dialog({title:"提示",message:e.data?"当前TestCase正在运行":"当前TestCase为停止状态"}),t.$q.loading.hide()}))},lookMasterLog:function(){var t=this;this.$q.loading.show(),i["l"]({caseId:this.$route.query.id}).then((function(e){t.$q.loading.hide(),t.$q.dialog({title:"提示",message:e.data})}))},lookSlaveLog:function(){var t=this;if(0==this.SlaveHostSelected.length)this.$q.notify({position:"top",message:"提示",caption:"请选择SlaveHost",color:"red"});else if(1==this.SlaveHostSelected.length){this.$q.loading.show();var e={caseId:this.$route.query.id,slaveHostId:this.SlaveHostSelected[0].id};i["n"](e).then((function(e){t.$q.loading.hide(),t.$q.dialog({title:"提示",message:e.data})}))}else this.SlaveHostSelected.length>1&&this.$q.notify({position:"top",message:"提示",caption:"只能选择一个SlaveHost",color:"red"})},lookMonitorUrl:function(){this.$q.dialog({title:"提示",message:this.detailData.monitorUrl})}}},c=l,r=(s("f694"),s("c309"),s("2877")),d=Object(r["a"])(c,a,o,!1,null,"4e124b6e",null);e["default"]=d.exports},6334:function(t,e,s){},7729:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Master Host List")])]),s("q-separator"),s("div",{staticClass:"new_input"},t._l(t.masterHostList,(function(e,a){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a,attrs:{tag:"label"}},[s("q-item-section",{attrs:{avatar:""}},[s("q-radio",{attrs:{val:a,color:"teal"},model:{value:t.selectIndex,callback:function(e){t.selectIndex=e},expression:"selectIndex"}})],1),s("q-item-section",[s("q-item-label",[t._v(t._s(e.address))])],1)],1)})),1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"取消",color:"primary"},on:{click:t.cancel}}),s("q-btn",{attrs:{flat:"",label:"添加",color:"primary"},on:{click:t.confirm}})],1)],1)],1)},o=[],i={props:["fixed","masterHostList","masterSelectIndex"],name:"lookUp",data:function(){return{selectIndex:-1}},watch:{masterSelectIndex:function(t){this.selectIndex=t}},methods:{confirm:function(){this.$emit("addMasterHost",this.selectIndex)},cancel:function(){this.$emit("cancelMasterHost")}}},n=i,l=s("2877"),c=Object(l["a"])(n,a,o,!1,null,"1210330f",null);e["a"]=c.exports},c309:function(t,e,s){"use strict";var a=s("6334"),o=s.n(a);o.a},f694:function(t,e,s){"use strict";var a=s("f7c1"),o=s.n(a);o.a},f7c1:function(t,e,s){}}]);
//# sourceMappingURL=chunk-a3a8803a.181cab72.js.map